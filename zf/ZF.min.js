const $ZF=new ZFCore();function ZFCore(){if(window&&window.$ZF){throw new Error('ZFCore is Created');return;}window.$ZF=this;if(!window.$Z)window.$Z={};const VERSION='0.2.0';this.f=function(){};var $MS=[],$CS=[],$CH={},$PH={},$BT=new Date().getTime(),$L=console.log;this.L=$L;$L(['ZFCore',VERSION]);this.E=this.extends=function(E,C,P,G,S){var d=_CD(E);if(!d){$ZF.throw('Undefined Parent Class',0,'ZFCore.extends');return;}else if(d.hasOwnProperty('final')){$ZF.throw(d.name+' is Final Class',0,'ZFCore.extends');return;}if(!$ZF.classOf(E,'ZInterface')){C.prototype=Object.create(d.ref.prototype);}_CR(C,P,G,S).ext=d;};this.I=this.interface=function(T,L){var C=arguments.callee.caller;if(!$ZF.classOf(C,ZInterface)){$ZF.throw('Invalid interface class',0,C.name);return};L=$ZF.array(L);for(var n=0;n<L.length;n++){if(typeof(L[n])=='string')T[L[n]]=$ZF.f;}};this.S=this.super=function(T,P,I){var a=[],d=arguments.callee.caller,c=_CD(d),cn=c.name;if(!c){$ZF.throw('Invalid Class Data',0,d.name+'.super');return}else if(c.hasOwnProperty('once')&&c.cnt!=0){$ZF.throw(cn+' is Once Class',0,cn+'.super');return}else if(c.hasOwnProperty('limit')&&c.cnt>=c.limit){$ZF.throw(cn+' is Limit Class',0,cn+'.super');return}if(!c.ext)c.ext=_CD('ZObject');if(!Array.isArray(P))P=[P];if(c.hasOwnProperty('interface'))I=c.interface;if(I){var IC=_IFC(c.ext);I=$ZF.array(I);for(var n=0;n<I.length;n++){if(d=_CD(I[n])){if(IC.indexOf(d.key)==-1){d.ref.apply(T);a.push(d.key);}}else $ZF.error('Invalid interface class',0,'ZF.super');}}c.ext.ref.apply( T, P );c.cnt++;var sp=new ZSuper(T,c.key,a);return sp;};var _IFC=function( D ){var n,m,d,a,c=(D.ext)?_IFC(D.ext):[];if(m=D.interface){if(!Array.isArray(m))m=[m];for(a=[],n=0;n<m.length;n++){if(d=_CD(m[n]))a.push(d.key);}c=c.concat(a);}return c;};var _CD=function(C,P){if(typeof(C)=='string'){if(!P)P='_';if($CH.hasOwnProperty(C))return $CH[C];else if($PH.hasOwnProperty(C))return $PH[C];else if($PH.hasOwnProperty(P+'.'+C))return $PH[P+'.'+C];}else{var a=$CS,n=a.length;while(n--){if(a[n].ref==C)return a[n]}}return null;};var _CR=function(C,P,G,S){var d,m,n,s,arr,o,PT=C.prototype;m=C.name;if(typeof P=='string'){P={P:P}}else if(Array.isArray(P)){var a=P;P={};switch(a.length){case 3:P.F=a[2];case 2:P.I=a[1];case 1:P.P=a[0];}}else if(!P)P={};if(P.CLASS)P.C=P.CLASS;else if(!P.C)P.C=m;if(P.PACKAGE)P.P=P.PACKAGE;else if(!P.P)P.P='_';if(d=_CD(m,P.P))return d;d={ref:C,name:P.C,pk:P.P,ext:null,cnt:0,key:$CS.length};if(P.I||P.INTERFACE)d['interface']=P.I||P.INTERFACE;if(P.F||P.FINAL)d['final']=true;if(P.O||P.ONCE)d['once']=true;if(P.L||P.LIMIT)d['limit']=P.L||P.LIMIT;$CS.push(d);$CH[m]=d;$PH[P.P+'.'+m]=d;for(s in P){PT[s]=P[s]};function GP(p){return function(){return (this.hasOwnProperty('getProp'))?this.getProp(p):null;}};function SP(p){return function(v){return this.setProp(p,v);}};if(Array.isArray(G)){arr=(Array.isArray(S))?S:[];for(n=0;n<G.length;n++){s=G[n];o={get:GP(s)};if(arr.indexOf(s)!=-1)o['set']=SP(s);Object.defineProperty(PT,s,o);}}else if(typeof(G)=='object'){for(s in G){type=typeof(G[s]);if(type=='object'){Object.defineProperty(PT,s,G[s]);}else if(type=='function'){if(!S||!S.hasOwnProperty(s)){o={get:G[s]}}else{o={get:G[s],set:S[s]}}Object.defineProperty(PT,s,o)}}}else if(Array.isArray(S)){for(n=0;n<S.length;n++){Object.defineProperties(PT,S[n],{set:SP})}}else if(typeof(S)=='object'){for(s in S){type=typeof(S[s]);if(type=='function')Object.defineProperties(PT,s,{set:S[s]});else if(type=='object')Object.defineProperties(PT,s,S[s]);}}return d;};this.error=function(M,C,O,T){$L(0,'ERROR',M,O);if(T)throw new Error(M);};this.throw=function( M, C, O ){this.error(M,C,O,true);};this.dispose=function( T ){$L(0,'ZF.dispose',T);function D(T){if(!T)return;if(T.super)T.super.__dispose();if(T.debugObj)T.debugObj.dispose();for(var s in T){T[s]=null;delete T[s];};D(T.__proto__);T.__proto__=null;};D(T);};this.classOf=function(T,R){var n=100,D=_CD(T),E=_CD(R);if(!D||!E)return false;while(n--){if(D.key==E.key)return true;else if(!D.ext)return false;D=D.ext;}return false;};this.extendsOf=function(T,R){var D=_CD(R);if(!(T instanceof ZObject)||!D)return false;var S=T.super,C=S.chain,H=S.hasin,K=D.key;return (C.indexOf(K)==-1&&H.indexOf(K)==-1)?false:true;};this.interfaceOf=function(T,R){var D=_CD(R);if(!(T instanceof ZObject)||!D)return false;return (T.super.hasin.indexOf(D.key)==-1)?false:true;};this.className=function(T){var n,d;if(typeof(T)=='number'){d=$CS[T];return (d)?d.name:'';}else{n=$CS.length;while( n-- ){d=$CS[n];if(d.ref==T)return d.name;}return '';}};this.has=function(T,P ){if(!T)return false;else if(this.isArr(T))return (T.indexOf(P)==-1)?false:true;else return T.hasOwnProperty(P);};this.apply=function(T,N,P,D){if(T&&T.hasOwnProperty(N)&&typeof(T[N])=='function')return T[N].apply(T,P);else return D;};this.zobj=function(v){return (v instanceof ZObj)?v:new ZObj(v);};this.array=function(v){return (Array.isArray(v))?v:[v]};this.string=function(v){return String(v)};this.number=function(v){return parseFloat(v)};this.int=function(v){return parseInt(v)};this.flatArray=function(a){var f=function(x){for(var m,v,a=[],n=0;n<x.length;n++){v=x[n];if(!Array.isArray(v))a.push(v);else a=a.concat(f(v));}return a};if(!Array.isArray(arr))return [arr];else return f(arr);};this.isArr=function(A){return Array.isArray(A);};this.isFunc=function(F){return (typeof(F)==='function')?true:false;};this.getTimer=function(){return (new Date().getTime()-$BT)/1000;};this.getClassesName=function(){var a=[],s=$CS,n=s.length;while(n--)a.unshift(s[n].pk+'.'+s[n].name);return a.sort();};this.addModule=function( M, I ){if(!$ZF.extendsOf(M,'ZSystemModule')){$ZF.throw('Invalid instance');return;}if(I)$Z[I]=M;$MS.push(M);$L([M.getName(),M.getVersion()]);};this.getModule=function(N){for(var s=$moduleStack,n=0;n<s.length;n++){if(s[n].getName()==N)return s[n];}};var _startup=function(){for(var n=0;n<$MS.length;n++)$MS[n].startup();};_CR(ZObject,'zf',['super','dataType']);_CR(ZInterface,'zf');if( window.hasOwnProperty('jQuery') ){$(document).ready(function(){_startup();});}};ZSuper.prototype={get key(){return this.getCK()},get chain(){return this.getCC()},get hasin(){return this.getHI()},get dataType(){return $ZF.className(this.getCK())}};function ZSuper( T, K, I ){var _T=T,_K=K,_S=T.supers,_P=(_S)?_S[0]:null,_C=(_P)?_P.getCC().concat():[0],_I=(_P)?_P.getHI().concat(I):(I)?I:[];this.parent=_P;_C.unshift(K);_S.unshift(this);this.override=function(N,F){var B=_T[N];if($ZF.isFunc(B))this[N]=B.bind(_T);if($ZF.isFunc(F))_T[N]=F.bind(_T);return this};this.disable=function(N,M){if(!M)M=N+' is disable function';_T[N]=function(){$ZF.error(M,0,_T.dataType+'.'+N);}.bind(_T);return this};this.getHI=function(){return _I};this.getCK=function(){return _K};this.getCC=function(){return _C.concat()};this.__dispose=function(){if(_P)_P.__dispose();$ZF.dispose(this);};};ZObj.prototype={get obj(){return this.getObj()}};function ZObj(T){var o=(T instanceof ZObj)?o=T.obj:o=T||{};this.getObj=function(){return o};this.has=function(p){return o.hasOwnProperty(p)};this.get=function(p,d){return (this.has(p))?o[p]:d};this.set=function(p,v){o[p]=v;return this;};this.init=function(p,v){if(!this.has(p))o[p]=v;return this;};};ZDebug.disabled=false;ZDebug.block=[];function ZDebug(T,N,C){this.debug=function(){if(ZDebug.disabled)return;var a=[],n=arguments.length,m=this.debugName||this.name||'';if(ZDebug.block.indexOf(m)!=-1)return;while(n--)a.unshift(arguments[n]);if(a.length==0)a.unshift(' ');else if(m!='')a.unshift('['+m+']\n');console.log.apply(this,a);};this.dispose=function(){if( this.T ){delete this.T.debugObj;delete this.T.debug;delete this.T;}$ZF.dispose(this);};if(!N){var a=arguments.callee.caller;N=(a)?a.name:'';}if(T){if(N)T['debugName']=N;else if(T['name'])T['debugName']=T.name;T.debug=this.debug.bind(T);T.debugObj=this;this.T=T;if(C)T.debug('# CONSTRUCTOR');}else{this.debugName=N}};function ZInterface(){};function ZObject(){var $S=[];this.supers=$S;this.debug=function(){};this.dispose=function(){$ZF.dispose(this)};this.toString=function(){return '[ZObject '+this.dataType+']'};this.setProp=function(N,V){};this.getProp=function(N){switch(N){case'super':return $S[0];case'dataType':return this.super.dataType;}};};$ZF.extends(ZObject,ZSystemModule,'zf.core');function ZSystemModule(N,V){var $S=$ZF.super(this);var $N=N,$V=V;$S.disable('dispose');this.getName=function(){return $N};this.getVersion=function(){return $V};this.startup=function(){console.log('['+this.getName()+'].startup')};};$PK='zf.events';$ZF.extends(ZObject,ZEvent,$PK,['type','bubbles','cancelable','target','currentTarget','eventPhase','isDefaultPrevented','isStopPropagation','isStopImmediatePropagation']);function ZEvent(T,B,C){var $S=$ZF.super(this),tp=T,bb=(B)?true:false,cb=(C)?true:false,tg,ct,ep=0,dp=false,sp=false,sip=false;$S.override('getProp',function(p){switch(p){case'type':return tp;case'bubbles':return bb;case'cancelable':return cb;case'target':return tg;case'currentTarget':return ct;case'EP':case'eventPhase':return ep;case'DP':case'isDefaultPrevented':return dp;case'SP':case'isStopPropagation':return sp;case'SIP':case'isStopImmediatePropagation':return sip;default:return $S.getProp(p);}});this.preventDefault=function(){dp=true};this.stopImmediatePropagation=function(){sip=true};this.stopPropagation=function(){sp=true};this.clone=function(){return new ZEvent(tp,bb,cb)};this.__setCurrent=function(T,P){if(!tg)tg=T;ct=T;ep=P;};};$ZF.extends(ZEvent,ZDataEvent,$PK,{data:function(){return this.getData()}});function ZDataEvent(t,d,b,c){var $S=$ZF.super(this,[t,b,c]),D=d;$S.override('dispose',function(){d=null;$S.dispose();$S=null;});this.getData=function(){return D};};$ZF.extends(ZInterface,IEventDispatcher,$PK);function IEventDispatcher(){$ZF.interface(this,['hasEvent','addEvent','addEventListener','dispatchEvent']);};$ZF.extends(ZObject,ZEventDispatcher,{P:$PK,I:IEventDispatcher});function ZEventDispatcher($P){const CT=1,AT=2,BB=3;var $S=$ZF.super(this,[]),L={},C={},P;$S.override('dispose',function(){var s,n,a;for(s in L){a=L[s];n=a.length;while(n--){a[n].splice(0,a[n].length);}a.splice(0,a.length);delete L[s]};for(s in C){a=C[s];n=a.length;while(n--){a[n].splice(0,a[n].length);}a.splice(0,a.length);delete C[s]};$S.dispose();$S=null;});this.hasEvent=function(t){return ((L.hasOwnProperty(t)&&L[t].length)||(C.hasOwnProperty(t)&&C[t].length))?true:false;};this.addEvent=function(t,l,g){if(!Array.isArray(t))t=[t];for(var n=0;n<type.length;n++){this.addEventListener(t[n],l,false,0,g);}};this.addEventListener=function(t,l,u,p,b){u=(u)?true:false;p=parseInt(p)||0;var d=[t,l,p,b];if(u){if(!C[t])C[t]=[];C[t].push(d);C[t].sort(function(a,b){return b[2]-a[2]});}else{if(!L[t])L[t]=[];L[t].push(d);L[t].sort(function(a,b){return b[2]-a[2]});}};this.removeEvent=function(t,l,u){if(!Array.isArray(t))t=[t];u=(u)?true:false;for(var n=0;n<type.length;n++){this.removeEventListener(t[n],l,u);}};this.removeEventListener=function(t,l,u){var n,a,o=(u)?C:L;if(!o.hasOwnProperty(t))return;a=o[t];n=a.length;while(n--){d=a[n];if(d[0]===t&&d[1]===l)a.splice(n,1);}};this.dispatchEvent=function(e){if(typeof(e)=='string')e=new ZEvent(e);else if(e instanceof Event){e=new ZEvent(e.type,e.bubbles,e.cancelable);}else if(!(e instanceof ZEvent)){$ZF.error(String(e)+' is not Event Object');return;}var n,m,l,r,a,p,tg,t=e.type;e.__setCurrent(this,AT);if(!e.bubbles){a=this.__getListeners(t);for(m=0;m<a.length;m++){r=a[m];r[1].call(r[3],e);if(e.SIP)return;}return;}var bb=this.__getBubbling();l=bb.length-1;if(l<0)l=0;for(n=0;n<l;n++){tg=bb[n];e.__setCurrent(tg,CT);a=tg.__getCaptures(t);for(m=0;m<a.length;m++){r=a[m];r[1].call(r[3],e);if(e.SIP)return;}if(e.SP)return;}p=AT;for(n=l;n>=0;n--){tg=bb[n];e.__setCurrent(tg,p);p=BB;a=tg.__getListeners(t);for(m=0;m<a.length;m++){r=a[m];r[1].call(r[3],e);if(e.SIP)return;}if(e.SP)return;}};this.__getBubbling=function(){if(P){var a=P.__getBubbling();a.push(this);return a;}else return [this]};this.__getCaptures=function(t){return (C.hasOwnProperty(t))?C[t]:[]};this.__getListeners=function(t){return (L.hasOwnProperty(t))?L[t]:[]};this.__setParentDispatcher=function(p){if(p instanceof ZEventDispatcher)P=p};if($P instanceof ZEventDispatcher)this.__setParentDispatcher($P);};